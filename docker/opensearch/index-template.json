{
  "index_patterns": ["cloud-speed-*"],
  "template": {
    "settings": {
      "number_of_shards": 1,
      "number_of_replicas": 0,
      "index.codec": "best_compression"
    },
    "mappings": {
      "properties": {
        "timestamp": {
          "type": "date"
        },
        "server": {
          "properties": {
            "city": { "type": "keyword" },
            "iata": { "type": "keyword" }
          }
        },
        "connection": {
          "properties": {
            "ip": { "type": "ip" },
            "country": { "type": "keyword" },
            "isp": { "type": "keyword" },
            "asn": { "type": "long" }
          }
        },
        "latency": {
          "properties": {
            "idle_ms": { "type": "float" },
            "idle_jitter_ms": { "type": "float" },
            "loaded_down_ms": { "type": "float" },
            "loaded_down_jitter_ms": { "type": "float" },
            "loaded_up_ms": { "type": "float" },
            "loaded_up_jitter_ms": { "type": "float" }
          }
        },
        "download": {
          "properties": {
            "speed_mbps": { "type": "float" },
            "early_terminated": { "type": "boolean" },
            "measurements": {
              "type": "nested",
              "properties": {
                "bytes": { "type": "long" },
                "speed_mbps": { "type": "float" },
                "count": { "type": "integer" }
              }
            }
          }
        },
        "upload": {
          "properties": {
            "speed_mbps": { "type": "float" },
            "early_terminated": { "type": "boolean" },
            "measurements": {
              "type": "nested",
              "properties": {
                "bytes": { "type": "long" },
                "speed_mbps": { "type": "float" },
                "count": { "type": "integer" }
              }
            }
          }
        },
        "packet_loss": {
          "properties": {
            "ratio": { "type": "float" },
            "percent": { "type": "float" },
            "packets_sent": { "type": "integer" },
            "packets_lost": { "type": "integer" },
            "packets_received": { "type": "integer" },
            "avg_rtt_ms": { "type": "float" }
          }
        },
        "scores": {
          "properties": {
            "streaming": { "type": "keyword" },
            "gaming": { "type": "keyword" },
            "video_conferencing": { "type": "keyword" },
            "overall": { "type": "keyword" }
          }
        }
      }
    }
  }
}
